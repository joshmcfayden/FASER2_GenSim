10d9
< import csv
91,115d89
<     def apply_effs(self, couplings,masses,eff_data,eff_cut,nsignals):
<         # Brute-force loop over masses and couplings to find match in efficiency
<         for ic,coup in enumerate(couplings):
<             for im,mass in enumerate(masses):
<                 eff=-1
< 
<                 # match entry
<                 for emass,ecoup,ecut,eeff in eff_data:
<                     if abs((float(mass)-float(emass))/float(emass))<0.01 and abs((float(coup)-float(ecoup))/float(ecoup))<0.01 and float(eff_cut)==float(ecut):
<                         eff=float(eeff)
< 
<                         #print("Found cut eff:",ecut)
<                         break
< 
<                 # Efficiency not found
<                 if eff<0:
<                     #print("NOT FOUND:",masses[im],couplings[ic],eff_cut)
<                     eff=1.0
< 
<                 # Apply efficiency
<                 nsignals[im][ic]=nsignals[im][ic]*eff
< 
<         return nsignals
< 
<     
997c971
<             fs_label=14, eff_file=None,
---
>             fs_label=14,
1048,1056d1021
< 
< 
<         # check for efficiency file
<         eff_data=[]
<         if eff_file:
<             eff_incsv=open(eff_file)
<             eff_rows=csv.reader(eff_incsv)
<             eff_data=list(eff_rows)
< 
1059c1024
<             filename, label, color, ls, alpha, level, eff_cut = setup
---
>             filename, label, color, ls, alpha, level = setup
1062,1065d1026
< 
<             if eff_cut:
<                 nsignals=self.apply_effs(couplings,masses,eff_data,eff_cut,nsignals)
<             
